{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\itsme.000\\\\OneDrive\\\\Skrivbord\\\\Nyheter-main\\\\client\\\\src\\\\views\\\\Homepage\\\\Homepage.jsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState, useRef } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Link, useParams, useNavigate, useLocation } from 'react-router-dom';\nimport ArticleComp from '../../components/Article/ArticleComp';\nimport Header from '../../components/Header/Header';\nimport styles from './Homepage.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst {\n  fetchArticles,\n  fetchArticlesByCategory\n} = require('../../dbUtils/articleActions');\n\nexport default function Homepage(_ref) {\n  _s();\n\n  let {\n    mostPopular\n  } = _ref;\n  const dispatch = useDispatch();\n  const stateArticles = useSelector(state => state.Articles);\n  const stateArticlesRef = useRef(stateArticles);\n  stateArticlesRef.current = stateArticles;\n  const stateUser = useSelector(state => state.User);\n  const [articlesToSplit, setArticlesToSplit] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const navigate = useNavigate();\n  const location = useLocation();\n  const {\n    category\n  } = useParams();\n  useEffect(() => {\n    setIsLoading(true);\n\n    if (category === undefined) {\n      fetchArticles().then(articles => {\n        articles.sort(function compare(a, b) {\n          var dateA = new Date(a.dateAdded);\n          var dateB = new Date(b.dateAdded);\n          return dateB - dateA;\n        });\n        dispatch({\n          type: \"setArticles\",\n          data: articles\n        });\n        setIsLoading(false);\n      });\n      setInterval(() => {\n        fetchArticles().then(articles => {\n          articles.sort(function compare(a, b) {\n            var dateA = new Date(a.dateAdded);\n            var dateB = new Date(b.dateAdded);\n            return dateB - dateA;\n          }); //go through all articles and check if they are in the stateArticles array\n          //if not, add them\n\n          articles.forEach(article => {\n            // we can use the .id property to check if the article is already in the stateArticles array\n            // since useState is not updated in intervals, we use the useRef hook to get the current value of the stateArticles array\n            let articleExists = stateArticlesRef.current.find(a => a.id === article.id);\n\n            if (!articleExists) {\n              dispatch({\n                type: \"addArticle\",\n                data: article\n              });\n            }\n          });\n        });\n      }, 6000); // should be 600000ms (= 10 minutes) in production\n    } else {\n      fetchArticlesByCategory({\n        category: category\n      }).then(articles => {\n        if (articles === undefined) {\n          articles = [];\n        }\n\n        dispatch({\n          type: \"setArticles\",\n          data: articles\n        });\n        setIsLoading(false);\n      });\n      setInterval(() => {\n        fetchArticlesByCategory({\n          category: category\n        }).then(articles => {\n          articles.sort(function compare(a, b) {\n            var dateA = new Date(a.dateAdded);\n            var dateB = new Date(b.dateAdded);\n            return dateB - dateA;\n          }); //go through all articles and check if they are in the stateArticles array\n          //if not, add them\n\n          articles.forEach(article => {\n            // we can use the .id property to check if the article is already in the stateArticles array\n            // since useState is not updated in intervals, we use the useRef hook to get the current value of the stateArticles array\n            let articleExists = stateArticlesRef.current.find(a => a.id === article.id);\n\n            if (!articleExists) {\n              dispatch({\n                type: \"addArticle\",\n                data: article\n              });\n            }\n          });\n        });\n      }, 6000); // should be 600000ms (= 10 minutes) in production\n    }\n  }, [category]);\n  useEffect(() => {}, [stateArticles]); //This code is for when we want the homepage to ONLY show articles from the last 24 hours\n  // to make it a truly \"dagens\" page\n\n  function showOnlyLast24Hours(articles) {\n    let articlesCopy = [...articles];\n    let todayDay = new Date();\n    let todayAtMidnight = new Date(todayDay).setHours(0, 0, 0, 1);\n    let todayAtMidnightPlusOneDay = new Date(todayAtMidnight).getTime() + 86400000;\n    let articlesFiltered = articlesCopy.filter(article => {\n      let articleDate = new Date(article.dateAdded).getTime(); // if the article was added between midnight and midnight + 1 day (today)\n\n      return articleDate >= todayAtMidnight && articleDate < todayAtMidnightPlusOneDay;\n    });\n    return articlesFiltered;\n  }\n\n  function sortByViews(articles) {\n    let articlesCopy = [...articles];\n    articlesCopy.sort(function compare(a, b) {\n      return b.views - a.views;\n    });\n    return articlesCopy;\n  }\n\n  useEffect(() => {\n    let articlesToSlitBeforeState = [...stateArticles];\n    articlesToSlitBeforeState = sortByViews(articlesToSlitBeforeState);\n\n    if (!mostPopular) {\n      articlesToSlitBeforeState = showOnlyLast24Hours(articlesToSlitBeforeState);\n    }\n\n    setArticlesToSplit(articlesToSlitBeforeState);\n  }, [stateArticles, location]); //split array into chunks of 10 articles\n\n  let articlesSplit = [];\n\n  while (articlesToSplit.length) {\n    articlesSplit.push(articlesToSplit.splice(0, 8));\n  }\n\n  let articlesMapped = []; // map each chunk of 10 articles\n\n  articlesSplit.forEach((articlesChunk, index) => {\n    // map each article in the chunk\n    articlesMapped.push(articlesSplit[index].map((articleFromStore, key) => {\n      // make the first 2 articles in the chunk bigger\n      // then make 4 in a row smaller\n      // then make the last 2 in the chunk bigger\n      if (key === 2 || key === 3 || key === 4 || key === 5) {\n        // the second article of every chunk of 10\n        return /*#__PURE__*/_jsxDEV(ArticleComp, {\n          article: articleFromStore,\n          smallVersion: true\n        }, articleFromStore.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 16\n        }, this);\n      } else {\n        return /*#__PURE__*/_jsxDEV(ArticleComp, {\n          article: articleFromStore\n        }, articleFromStore.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 16\n        }, this);\n      }\n    }));\n  });\n\n  function scrollToTop() {\n    window.scrollTo({\n      top: 0,\n      left: 0,\n      behavior: 'smooth'\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.homepage,\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }, this), stateUser.email ? /*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        textAlign: \"center\"\n      },\n      children: [\"V\\xE4lkommen tillbaka \", stateUser.name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"section\", {\n      className: styles.superAd,\n      children: [/*#__PURE__*/_jsxDEV(\"article\", {\n        className: styles.adText,\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          style: {\n            margin: \"1px\"\n          },\n          children: \"F\\xE5 obegr\\xE4nsad tillg\\xE5ng till Nyhetssidan!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            margin: \"1px\"\n          },\n          children: \"L\\xE4s trov\\xE4rdiga nyheter fr\\xE5n ett enh\\xF6rningsperspektiv.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            margin: \"1px\"\n          },\n          children: \" 2kr/dag i 12 m\\xE5nader.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/prenumerera\",\n        children: \"Prenumerera nu\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Redan prenumerant?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 56\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: styles.Login,\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/login\",\n          children: \"Logga in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 45\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 9\n    }, this), isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.loadingContainer,\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: articlesMapped.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.noArticlesContainer,\n        style: {\n          textAlign: \"center\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Inga artiklar har skrivits idag \\xE4nnu,\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"kolla in v\\xE5ran M\\xE4st Popul\\xE4ra artiklar sektion ist\\xE4llet!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/mestPopulara\",\n          children: \"Mest popul\\xE4ra\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: articlesMapped\n      }, void 0, false)\n    }, void 0, false), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: styles.toTheTop,\n      onClick: scrollToTop,\n      children: \"\\u2B06\\uFE0F\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 161,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Homepage, \"mzw5URI1HvrbQPlW7Smjot7v9Dw=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useNavigate, useLocation, useParams];\n});\n\n_c = Homepage;\n\nvar _c;\n\n$RefreshReg$(_c, \"Homepage\");","map":{"version":3,"names":["useEffect","useState","useRef","useSelector","useDispatch","Link","useParams","useNavigate","useLocation","ArticleComp","Header","styles","fetchArticles","fetchArticlesByCategory","require","Homepage","mostPopular","dispatch","stateArticles","state","Articles","stateArticlesRef","current","stateUser","User","articlesToSplit","setArticlesToSplit","isLoading","setIsLoading","navigate","location","category","undefined","then","articles","sort","compare","a","b","dateA","Date","dateAdded","dateB","type","data","setInterval","forEach","article","articleExists","find","id","showOnlyLast24Hours","articlesCopy","todayDay","todayAtMidnight","setHours","todayAtMidnightPlusOneDay","getTime","articlesFiltered","filter","articleDate","sortByViews","views","articlesToSlitBeforeState","articlesSplit","length","push","splice","articlesMapped","articlesChunk","index","map","articleFromStore","key","scrollToTop","window","scrollTo","top","left","behavior","homepage","email","textAlign","name","superAd","adText","margin","Login","loadingContainer","noArticlesContainer","toTheTop"],"sources":["C:/Users/itsme.000/OneDrive/Skrivbord/Nyheter-main/client/src/views/Homepage/Homepage.jsx"],"sourcesContent":["import { useEffect, useState, useRef } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { Link, useParams, useNavigate, useLocation } from 'react-router-dom'\nimport ArticleComp from '../../components/Article/ArticleComp'\nimport Header from '../../components/Header/Header'\n\nimport styles from './Homepage.module.css'\n\nconst { fetchArticles, fetchArticlesByCategory } = require('../../dbUtils/articleActions')\n\nexport default function Homepage({mostPopular}) {\n  const dispatch = useDispatch();\n\n  const stateArticles = useSelector(state => state.Articles);\n  const stateArticlesRef = useRef(stateArticles);\n  stateArticlesRef.current = stateArticles;\n\n  const stateUser = useSelector(state => state.User);\n  const [articlesToSplit, setArticlesToSplit] = useState([])\n  const [isLoading, setIsLoading] = useState(true);\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const { category } = useParams();\n\n  useEffect(()=>{\n    setIsLoading(true)\n    if(category === undefined) {\n      fetchArticles().then(articles =>{\n\n        articles.sort(function compare(a, b) {\n          var dateA = new Date(a.dateAdded);\n          var dateB = new Date(b.dateAdded);\n          return dateB - dateA;\n        });\n\n      dispatch({type:\"setArticles\", data: articles});\n        setIsLoading(false)\n      })\n\n      setInterval(()=>{\n        fetchArticles().then(articles =>{\n\n          articles.sort(function compare(a, b) {\n            var dateA = new Date(a.dateAdded);\n            var dateB = new Date(b.dateAdded);\n            return dateB - dateA;\n          });\n  \n          //go through all articles and check if they are in the stateArticles array\n          //if not, add them\n          articles.forEach(article => {\n            // we can use the .id property to check if the article is already in the stateArticles array\n            // since useState is not updated in intervals, we use the useRef hook to get the current value of the stateArticles array\n            let articleExists = stateArticlesRef.current.find(a => a.id === article.id)\n            if(!articleExists) {\n              dispatch({type:\"addArticle\", data: article})\n            }\n          })\n        })\n      }, 6000); // should be 600000ms (= 10 minutes) in production\n    } else {\n      fetchArticlesByCategory({category: category}).then(articles => {\n        if(articles === undefined) {\n          articles = []\n        }\n        dispatch({type: \"setArticles\", data: articles});\n        setIsLoading(false)\n      });\n\n      setInterval(()=>{\n        fetchArticlesByCategory({category: category}).then(articles =>{\n\n          articles.sort(function compare(a, b) {\n            var dateA = new Date(a.dateAdded);\n            var dateB = new Date(b.dateAdded);\n            return dateB - dateA;\n          });\n  \n          //go through all articles and check if they are in the stateArticles array\n          //if not, add them\n          articles.forEach(article => {\n            // we can use the .id property to check if the article is already in the stateArticles array\n            // since useState is not updated in intervals, we use the useRef hook to get the current value of the stateArticles array\n            let articleExists = stateArticlesRef.current.find(a => a.id === article.id)\n            if(!articleExists) {\n              dispatch({type:\"addArticle\", data: article})\n            }\n          })\n        })\n      }, 6000); // should be 600000ms (= 10 minutes) in production\n    }\n  }, [category])\n\n  useEffect(() =>{\n  }, [stateArticles]);\n\n  //This code is for when we want the homepage to ONLY show articles from the last 24 hours\n  // to make it a truly \"dagens\" page\n  function showOnlyLast24Hours(articles) {\n    let articlesCopy = [...articles];\n    let todayDay = new Date();\n    let todayAtMidnight = new Date(todayDay).setHours(0,0,0,1)\n    let todayAtMidnightPlusOneDay = new Date(todayAtMidnight).getTime() + 86400000;\n    let articlesFiltered = articlesCopy.filter(article => {\n      let articleDate = new Date(article.dateAdded).getTime();\n      // if the article was added between midnight and midnight + 1 day (today)\n      return articleDate >= todayAtMidnight && articleDate < todayAtMidnightPlusOneDay;\n    })\n\n    return articlesFiltered;\n  }\n\n  function sortByViews(articles) {\n    let articlesCopy = [...articles];\n    articlesCopy.sort(function compare(a, b) {\n      return b.views - a.views;\n    });\n\n    return articlesCopy;\n  }\n\n  useEffect(() => {\n    let articlesToSlitBeforeState = [...stateArticles];\n    articlesToSlitBeforeState = sortByViews(articlesToSlitBeforeState);\n    \n    if(!mostPopular) {\n      articlesToSlitBeforeState = showOnlyLast24Hours(articlesToSlitBeforeState);\n    }\n\n    setArticlesToSplit(articlesToSlitBeforeState);\n  }, [stateArticles, location])\n\n  //split array into chunks of 10 articles\n  let articlesSplit = []\n  while(articlesToSplit.length) {\n    articlesSplit.push(articlesToSplit.splice(0,8));\n  }\n\n  let articlesMapped = [];\n  // map each chunk of 10 articles\n  articlesSplit.forEach((articlesChunk, index) => {\n    // map each article in the chunk\n    articlesMapped.push(articlesSplit[index].map((articleFromStore, key) => {\n      // make the first 2 articles in the chunk bigger\n      // then make 4 in a row smaller\n      // then make the last 2 in the chunk bigger\n      if(key === 2 || key === 3 || key === 4 || key === 5) { // the second article of every chunk of 10\n        return <ArticleComp key={articleFromStore.id} article={articleFromStore} smallVersion />\n      } else {\n        return <ArticleComp key={articleFromStore.id} article={articleFromStore} />\n      }\n    }))\n  })\n\n  function scrollToTop(){\n    window.scrollTo({top: 0, left: 0, behavior: 'smooth'});\n  }\n\n  return (\n    <div className={styles.homepage}>\n      <Header />\n\n      {stateUser.email ? (\n        <h2 style={{textAlign: \"center\"}}>Välkommen tillbaka {stateUser.name}</h2>\n      ) : (\n        <section className={styles.superAd}>\n          <article className={styles.adText}>\n            <h2 style={{margin: \"1px\"}}>Få obegränsad tillgång till Nyhetssidan!</h2>\n            <h3 style={{margin: \"1px\"}}>Läs trovärdiga nyheter från ett enhörningsperspektiv.</h3>\n            <h3 style={{margin: \"1px\"}}> 2kr/dag i 12 månader.</h3>\n          </article>\n          <Link to=\"/prenumerera\">Prenumerera nu</Link><p>Redan prenumerant?</p>\n          <section className={styles.Login}><Link to=\"/login\">Logga in</Link></section>\n        </section>\n      )}\n\n      {isLoading ? (\n        <div className={styles.loadingContainer}>\n          <h2>Loading...</h2>\n        </div>\n      ) : (\n        <>\n          {articlesMapped.length === 0 ? (\n            <div className={styles.noArticlesContainer} style={{textAlign: \"center\"}}>\n              <h2>Inga artiklar har skrivits idag ännu,</h2>\n              <h2>kolla in våran Mäst Populära artiklar sektion istället!</h2>\n              <Link to=\"/mestPopulara\">Mest populära</Link>\n            </div>\n          ) : (\n            <>\n              {articlesMapped}\n            </>\n          )}\n        </>\n      )}\n      <section className={styles.toTheTop} onClick={scrollToTop}>⬆️</section>\n    </div>\n  )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}